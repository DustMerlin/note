# Jenkins 搭建

此搭建过程并不全面，可能仅仅涉及部分操作
此前是使用docker 搭建的 jenkins 环境
当时docker hub 找的也有问题
使用的单纯就是docker hub 上的命令
操作简单，但是一些该指定和映射的目录都没做

而且docker 中搭建jenkins 不是一个很好的选择

最后想到解决方法，在docker 容器所在的主机上搭建从节点

也就是主节点在docker 中，仅做一个服务访问入口
从节点执行真正的任务，如果有问题，重启docker 是个方便的选择
如果不在docker里执行，还是可以保证docker 不挂掉的

docker pull jenkins/jenkins:lts-jdk11

## 从节点搭建流程

### 凭证管理和登陆凭证

我学习是看书的，但是书上的内容显然是有点陈旧的，导致配置密钥
找了半天才找到，所以把相关内容个做记录

还有就是发现微信读书网页版用起来真不错，看技术数据屏幕大才好
也可以用ipad 或者 kindle 之后都去体验一下网页版
不过ipad 使用软件大差不差，手机应该只适合看社科类书籍

kindle 反正有了新的作用吧，废话少说继续

Dashboard > 凭据 >系统 > 全局凭据 (unrestricted)

配置用户名密码，或者ssh 密码，起名不重要还有描述只是方便自己去区分

之后要根据名字取选择凭证，起名还是应该让自己看懂

## 从节点配置

Dashboard -> 节点列表

添加新节点，设置节点名称，设置环境工具主要是git ,其他工具用过不许额外设置
只要节点环境配置中存在即可，选择凭证

如果凭证是root 用户则不需要做额外设置
如果有单独的用户，则需要设置额外的权限，确保可以正常执行

在全局环境中，一定不要把git default 删除，如果删除了一定要加回来
不然会导致git 无法使用，报找不到git 的错误

default git路径的git ,无需额外的路径，只需要填写git 即可

从节点需要配置git 环境变量，不然使用默认的git 无法正常执行
一般是/usr/bin/git ,应该配置绝对的路径，而非链接文件
配置文件后，应该需要重新链接节点，才能正常生效，此处被卡住了一段时间